{"version":3,"file":"index.modern.js","sources":["../src/TreeContext.js","../src/FancyTree.js","../src/utils.js"],"sourcesContent":["import { useState, useCallback, useEffect } from 'react';\r\nimport constate from 'constate';\r\nimport { useImmerReducer } from 'use-immer';\r\nimport { filter, includes, keys, map, mapKeys, mapValues, get } from 'lodash';\r\nimport {original} from \"immer\"\r\nimport { toTree } from '@ttungbmt/tree-js';\r\n\r\nconst initialState = {\r\n\tloading: false,\r\n\tids: [],\r\n\tentities: {}\r\n};\r\n\r\nconst updateIds = state => void (state.ids = keys(state.entities))\r\n\r\nconst caseReducers = {\r\n\tsetLoading: (state, { payload }) => state.loading = payload,\r\n\tsetAll: (state, { payload }) => {\r\n\t\tstate.entities = mapKeys(payload, 'id')\r\n\t\tupdateIds(state)\r\n\t},\r\n\tselect: (state, {payload}) => {\r\n\t\tpayload.ids.map(id => state.entities[id].selected = payload.selected)\r\n\t},\r\n\tselectOne: (state, { payload: {ids, selected, siblingIds} }) => {\r\n\t\tsiblingIds.map(id => state.entities[id].selected = !selected)\r\n\t\tids.map(id => state.entities[id].selected = selected)\r\n\t},\r\n\tsetExpand: (state, {payload: id}) => {\r\n\t\tif(state.entities[id]) state.entities[id].expanded = true\r\n\t},\r\n\tsetCollapse: (state, {payload: id}) => {\r\n\t\tif(state.entities[id]) state.entities[id].expanded = false\r\n\t}\r\n};\r\n\r\nconst reducer = (draft, action) => void caseReducers[action.type](draft, action);\r\n\r\nfunction useTree() {\r\n\tconst [state, dispatch] = useImmerReducer(reducer, initialState);\r\n\tconst [tree, setTree] = useState(undefined);\r\n\r\n\tconst actions = useCallback(() => ({\r\n\t\t...mapValues(caseReducers, (action, type) => (payload) => dispatch({ type, payload })),\r\n\t\texpandAll: () => tree.expandAll(),\r\n\t\tcollapseAll: () => tree.expandAll(false),\r\n\t\ttoggleExpandAll: () => tree.visit((node) => node.toggleExpanded()),\r\n\t}), [tree]);\r\n\r\n\treturn {\r\n\t\t...actions(),\r\n\t\ttree,\r\n\t\tsetTree,\r\n\t\tdispatch,\r\n\t\tsource: toTree(state.ids.map(id => state.entities[id])),\r\n\t};\r\n}\r\n\r\nconst [TreeProvider, useTreeContext] = constate(useTree);\r\n\r\nexport {\r\n\tTreeProvider,\r\n\tuseTreeContext\r\n};","import React, {memo, useRef, useEffect} from 'react';\r\nimport clsx from 'clsx';\r\nimport _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport 'jquery-ui'\r\nimport 'jquery.fancytree'\r\nimport 'jquery.fancytree/dist/modules/jquery.fancytree.filter'\r\nimport 'jquery.fancytree/dist/modules/jquery.fancytree.glyph'\r\nimport {useTreeContext} from './TreeContext';\r\nimport {nanoid} from 'nanoid'\r\nimport {useContextMenu, Menu, Item, Separator, contextMenu} from \"react-contexify\";\r\nimport \"react-contexify/dist/ReactContexify.css\";\r\n\r\nconst events = ['blurTree', 'create', 'init', 'focusTree', 'restore', 'activate', 'beforeActivate', 'beforeExpand', 'beforeSelect', 'blur', 'click', 'collapse', 'createNode', 'dblclick', 'deactivate', 'expand', 'focus', 'keydown', 'keypress', 'lazyLoad', 'loadChildren', 'loadError', 'postProcess', 'modifyChild', 'renderNode', 'renderTitle', 'select'];\r\n\r\nconst toEventFuncs = (props) => _.chain(events).mapKeys((n) => n).mapValues((n) => (...args) => {\r\n    let eventName = `on${_.upperFirst(n)}`;\r\n    props[eventName] && props[eventName](...args);\r\n}).value();\r\n\r\n\r\nfunction useTreeElement(treeRef, props) {\r\n    const {setTree} = useTreeContext()\r\n\r\n    const options = _.omit(props.options, events) || {};\r\n    useEffect(() => {\r\n        let $el;\r\n\r\n        if (treeRef.current) {\r\n            let eventFns = toEventFuncs(props);\r\n\r\n            $el = $(treeRef.current).fancytree({\r\n                ...eventFns,\r\n                ...options,\r\n                renderNode: function (event, {node}) {\r\n                    let $el = $(node.span).find('.label-feature-count'),\r\n                        count = node.data.count\r\n\r\n                    if (count && !$el.length) {\r\n                        $(node.span).append($(`<div class=\"label-feature-count\">${count}</div>`));\r\n                    }\r\n\r\n\r\n                    $(node.span).find('.fancytree-title').contextmenu((e) => {\r\n                        contextMenu.show({\r\n                            id: MENU_ID,\r\n                            event: e,\r\n                            props: {\r\n                                ...node.data,\r\n                                ..._.pick(node, ['title', 'type'])\r\n                            }\r\n                        })\r\n                    })\r\n                },\r\n\r\n            });\r\n\r\n            setTree($.ui.fancytree.getTree(treeRef.current))\r\n        }\r\n    }, []);\r\n}\r\n\r\nconst renderTree = (nodes, key) => {\r\n    if (_.isArray(nodes))\r\n        return nodes.map((node, key) => renderTree(node, key + 1))\r\n\r\n    const {children, tooltip, title, count, data = {}, ...rest} = nodes\r\n    const folder = _.isNil(rest.folder) ? _.isArray(children) && !_.isEmpty(children) : rest.folder\r\n\r\n    return (\r\n        <li\r\n            key={key}\r\n            id={'ft' + key}\r\n            title={tooltip}\r\n            className={clsx('relative', {folder})}\r\n            data-json={JSON.stringify({...rest, ...data})}\r\n        >\r\n            {title}\r\n            {_.isArray(children) ? (\r\n                <ul>\r\n                    {children.map((node1, key1) => renderTree(node1, key + '.' + (key1 + 1)))}\r\n                </ul>\r\n            ) : null}\r\n        </li>\r\n    )\r\n}\r\n\r\nconst MENU_ID = \"layers\";\r\n\r\nfunction FancyTree({id, style, className, children, source, onItemClick, ...props}) {\r\n    const treeRef = useRef(null);\r\n    const {show, hideAll} = useContextMenu({\r\n        id: MENU_ID,\r\n    });\r\n\r\n    useTreeElement(treeRef, {...props, show});\r\n\r\n    return (\r\n        <div id={id} className={clsx(className)} style={style} ref={treeRef}>\r\n            {children ? (\r\n                children\r\n            ) : (\r\n                <ul style={{display: 'none'}}>\r\n                    {renderTree(source)}\r\n                </ul>\r\n            )}\r\n\r\n            <Menu id={MENU_ID}>\r\n                <Item id=\"act-edit\" onClick={onItemClick}>\r\n                    Tùy chỉnh\r\n                </Item>\r\n            </Menu>\r\n        </div>\r\n    );\r\n}\r\n\r\nFancyTree.defaultProps = {\r\n    options: {\r\n        checkbox: true, // Show check boxes\r\n        selectMode: 3, // 1:single, 2:multi, 3:multi-hier\r\n        quicksearch: true, // Navigate to next node by typing the first letters\r\n        icon: true, // Display node icons\r\n        clickFolderMode: 3, // 1:activate, 2:expand, 3:activate and expand, 4:activate (dblclick expands)\r\n\r\n        checkboxAutoHide: false, // Display check boxes on hover only\r\n        disabled: false, // Disable control\r\n\r\n        wide: {\r\n            iconWidth: '3em', // Adjust this if @fancy-icon-width != \"16px\"\r\n            iconSpacing: '0.5em', // Adjust this if @fancy-icon-spacing != \"3px\"\r\n            labelSpacing: '0.1em', // Adjust this if padding between icon and label != \"3px\"\r\n            levelOfs: '1.5em' // Adjust this if ul padding != \"16px\"\r\n        },\r\n\r\n        filter: {\r\n            autoApply: true, // Re-apply last filter if lazy data is loaded\r\n            autoExpand: false, // Expand all branches that contain matches while filtered\r\n            counter: true, // Show a badge with number of matching child nodes near parent icons\r\n            fuzzy: false, // Match single characters in order, e.g. 'fb' will match 'FooBar'\r\n            hideExpandedCounter: true, // Hide counter badge if parent is expanded\r\n            hideExpanders: false, // Hide expanders if all child nodes are hidden by filter\r\n            highlight: true, // Highlight matches by wrapping inside <mark> tags\r\n            leavesOnly: false, // Match end nodes only\r\n            nodata: true, // Display a 'no data' status node if result is empty\r\n            mode: 'dimm' // Grayout unmatched nodes (pass \"hide\" to remove unmatched node instead)\r\n        },\r\n\r\n        childcounter: {\r\n            deep: true,\r\n            hideZeros: true,\r\n            hideExpanded: true\r\n        },\r\n\r\n        extensions: [\r\n            'filter'\r\n            // 'childcounter'\r\n        ]\r\n    },\r\n    onItemClick: () => {}\r\n};\r\n\r\nexport default memo(FancyTree);","export const getToggleFiles = (node) => {\n    if (node.isFolder()) {\n        let children = []\n        node.visit((child) => {\n            !child.isFolder() && children.push(child)\n        })\n        return children\n    }\n    return [node]\n}\n"],"names":["initialState","loading","ids","entities","updateIds","state","keys","caseReducers","setLoading","payload","setAll","mapKeys","select","map","id","selected","selectOne","siblingIds","setExpand","expanded","setCollapse","reducer","draft","action","type","useTree","dispatch","useImmerReducer","tree","setTree","useState","undefined","actions","useCallback","mapValues","expandAll","collapseAll","toggleExpandAll","visit","node","toggleExpanded","source","toTree","TreeProvider","useTreeContext","constate","events","toEventFuncs","props","_","chain","n","args","eventName","upperFirst","value","useTreeElement","treeRef","options","omit","useEffect","current","eventFns","$el","$","fancytree","renderNode","event","span","find","count","data","length","append","contextmenu","e","contextMenu","show","MENU_ID","pick","ui","getTree","renderTree","nodes","key","isArray","children","tooltip","title","rest","folder","isNil","isEmpty","clsx","JSON","stringify","node1","key1","FancyTree","style","className","onItemClick","useRef","hideAll","useContextMenu","display","defaultProps","checkbox","selectMode","quicksearch","icon","clickFolderMode","checkboxAutoHide","disabled","wide","iconWidth","iconSpacing","labelSpacing","levelOfs","filter","autoApply","autoExpand","counter","fuzzy","hideExpandedCounter","hideExpanders","highlight","leavesOnly","nodata","mode","childcounter","deep","hideZeros","hideExpanded","extensions","memo","getToggleFiles","isFolder","child","push"],"mappings":"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"}