{"version":3,"file":"index.js","sources":["../src/TreeContext.js","../src/FancyTree.js","../src/utils.js"],"sourcesContent":["import { useState, useCallback, useEffect } from 'react';\r\nimport constate from 'constate';\r\nimport { useImmerReducer } from 'use-immer';\r\nimport { filter, includes, keys, map, mapKeys, mapValues } from 'lodash';\r\nimport {original} from \"immer\"\r\nimport { toTree } from '@ttungbmt/tree-js';\r\n\r\nconst initialState = {\r\n\tloading: false,\r\n\tids: [],\r\n\tentities: {}\r\n};\r\n\r\nconst updateIds = state => void (state.ids = keys(state.entities))\r\n\r\nconst caseReducers = {\r\n\tsetLoading: (state, { payload }) => state.loading = payload,\r\n\tsetAll: (state, { payload }) => {\r\n\t\tstate.entities = mapKeys(payload.map(v => {\r\n\t\t\tif(!v.folder && !v.icon) v.icon = false\r\n\t\t\treturn v\r\n\t\t}), 'id')\r\n\t\tupdateIds(state)\r\n\t},\r\n\tselect: (state, {payload}) => {\r\n\t\tpayload.ids.map(id => state.entities[id].selected = payload.selected)\r\n\t},\r\n\tselectOne: (state, { payload: {ids, selected, siblingIds} }) => {\r\n\t\tsiblingIds.map(id => state.entities[id].selected = !selected)\r\n\t\tids.map(id => state.entities[id].selected = selected)\r\n\t},\r\n\tsetExpand: (state, {payload: id}) => {\r\n\t\tif(state.entities[id]) state.entities[id].expanded = true\r\n\t},\r\n\tsetCollapse: (state, {payload: id}) => {\r\n\t\tif(state.entities[id]) state.entities[id].expanded = false\r\n\t},\r\n\tupdateItem: (state, {payload}) => {\r\n\t\tlet entity = state.entities[payload.id]\r\n\t\tmap(payload.changes, (v, k) => entity[k] = v)\r\n\t}\r\n};\r\n\r\nconst reducer = (draft, action) => void caseReducers[action.type](draft, action);\r\n\r\nfunction useTree() {\r\n\tconst [state, dispatch] = useImmerReducer(reducer, initialState);\r\n\tconst [tree, setTree] = useState(undefined);\r\n\r\n\tconst actions = useCallback(() => ({\r\n\t\t...mapValues(caseReducers, (action, type) => (payload) => dispatch({ type, payload })),\r\n\t\texpandAll: () => tree.expandAll(),\r\n\t\tcollapseAll: () => tree.expandAll(false),\r\n\t\ttoggleExpandAll: () => tree.visit((node) => node.toggleExpanded()),\r\n\t}), [tree]);\r\n\r\n\treturn {\r\n\t\t...actions(),\r\n\t\ttree,\r\n\t\tsetTree,\r\n\t\tdispatch,\r\n\t\tsource: toTree(state.ids.map(id => state.entities[id])),\r\n\t};\r\n}\r\n\r\nconst [TreeProvider, useTreeContext] = constate(useTree);\r\n\r\nexport {\r\n\tTreeProvider,\r\n\tuseTreeContext\r\n};","import React, {memo, useRef, useEffect} from 'react';\r\nimport clsx from 'clsx';\r\nimport _ from 'lodash';\r\nimport $ from 'jquery';\r\nimport 'jquery-ui'\r\nimport 'jquery.fancytree'\r\nimport 'jquery.fancytree/dist/modules/jquery.fancytree.filter'\r\nimport 'jquery.fancytree/dist/modules/jquery.fancytree.glyph'\r\nimport {useTreeContext} from './TreeContext';\r\nimport {useContextMenu, Menu, Item, Separator, contextMenu} from \"react-contexify\";\r\nimport \"react-contexify/dist/ReactContexify.css\";\r\n\r\nconst events = ['blurTree', 'create', 'init', 'focusTree', 'restore', 'activate', 'beforeActivate', 'beforeExpand', 'beforeSelect', 'blur', 'click', 'collapse', 'createNode', 'dblclick', 'deactivate', 'expand', 'focus', 'keydown', 'keypress', 'lazyLoad', 'loadChildren', 'loadError', 'postProcess', 'modifyChild', 'renderNode', 'renderTitle', 'select'];\r\n\r\nconst toEventFuncs = (props) => _.chain(events).mapKeys((n) => n).mapValues((n) => (...args) => {\r\n    let eventName = `on${_.upperFirst(n)}`;\r\n    props[eventName] && props[eventName](...args);\r\n}).value();\r\n\r\n\r\nfunction useTreeElement(treeRef, props) {\r\n    const {tree, setTree} = useTreeContext()\r\n\r\n    const options = _.omit(props.options, events) || {};\r\n    useEffect(() => {\r\n        let $el;\r\n\r\n        if (treeRef.current) {\r\n            let eventFns = toEventFuncs(props);\r\n\r\n            $el = $(treeRef.current).fancytree({\r\n                ...eventFns,\r\n                ...options,\r\n                source: props.source,\r\n                renderNode: function (event, {node}) {\r\n\r\n                    let $el = $(node.span).find('.label-feature-count'),\r\n                        count = node.data.count\r\n\r\n                    if (count && !$el.length) {\r\n                        $(node.span).append($(`<div class=\"label-feature-count\">${count}</div>`));\r\n                    }\r\n\r\n\r\n                    $(node.span).find('.fancytree-title').contextmenu((e) => {\r\n                        contextMenu.show({\r\n                            id: MENU_ID,\r\n                            event: e,\r\n                            props: {\r\n                                ...node.data,\r\n                                ..._.pick(node, ['title', 'type'])\r\n                            }\r\n                        })\r\n                    })\r\n                },\r\n\r\n            });\r\n\r\n            setTree($.ui.fancytree.getTree(treeRef.current))\r\n        }\r\n\r\n        return () => {\r\n            if (!treeRef.current) {\r\n                tree && tree.destroy()\r\n                setTree(null)\r\n            }\r\n        }\r\n    }, []);\r\n}\r\n\r\nconst renderTree = (nodes, key) => {\r\n    if (_.isArray(nodes))\r\n        return nodes.map((node, key) => renderTree(node, key + 1))\r\n\r\n    const {children, tooltip, title, count, data = {}, ...rest} = nodes\r\n    const folder = _.isNil(rest.folder) ? _.isArray(children) && !_.isEmpty(children) : rest.folder\r\n\r\n    return (\r\n        <li\r\n            key={key}\r\n            id={'ft' + key}\r\n            title={tooltip}\r\n            className={clsx('relative', {folder})}\r\n            data-json={JSON.stringify({...rest, ...data})}\r\n        >\r\n            {title}\r\n            {_.isArray(children) ? (\r\n                <ul>\r\n                    {children.map((node1, key1) => renderTree(node1, key + '.' + (key1 + 1)))}\r\n                </ul>\r\n            ) : null}\r\n        </li>\r\n    )\r\n}\r\n\r\nconst MENU_ID = \"layers\";\r\n\r\nfunction FancyTree({id, style, className, children, source, onItemClick, ...props}) {\r\n    const treeRef = useRef(null);\r\n    const {show, hideAll} = useContextMenu({\r\n        id: MENU_ID,\r\n    });\r\n\r\n    useTreeElement(treeRef, {...props, source, show});\r\n\r\n\r\n    return (\r\n        <div id={id} className={clsx(className)} style={style} ref={treeRef}>\r\n            {children ? (\r\n                children\r\n            ) : (\r\n                <ul style={{display: 'none'}}>\r\n                    {/*{renderTree(source)}*/}\r\n                </ul>\r\n            )}\r\n\r\n            <Menu id={MENU_ID}>\r\n                <Item id=\"act-edit\" onClick={onItemClick}>\r\n                    Edit\r\n                </Item>\r\n                <Item id=\"act-zoom\" onClick={onItemClick}>\r\n                    Zoom to layer\r\n                </Item>\r\n            </Menu>\r\n        </div>\r\n    );\r\n}\r\n\r\nFancyTree.defaultProps = {\r\n    options: {\r\n        checkbox: true, // Show check boxes\r\n        selectMode: 3, // 1:single, 2:multi, 3:multi-hier\r\n        quicksearch: true, // Navigate to next node by typing the first letters\r\n        icon: true, // Display node icons\r\n        clickFolderMode: 3, // 1:activate, 2:expand, 3:activate and expand, 4:activate (dblclick expands)\r\n\r\n        checkboxAutoHide: false, // Display check boxes on hover only\r\n        disabled: false, // Disable control\r\n\r\n        wide: {\r\n            iconWidth: '3em', // Adjust this if @fancy-icon-width != \"16px\"\r\n            iconSpacing: '0.5em', // Adjust this if @fancy-icon-spacing != \"3px\"\r\n            labelSpacing: '0.1em', // Adjust this if padding between icon and label != \"3px\"\r\n            levelOfs: '1.5em' // Adjust this if ul padding != \"16px\"\r\n        },\r\n\r\n        filter: {\r\n            autoApply: true, // Re-apply last filter if lazy data is loaded\r\n            autoExpand: false, // Expand all branches that contain matches while filtered\r\n            counter: true, // Show a badge with number of matching child nodes near parent icons\r\n            fuzzy: false, // Match single characters in order, e.g. 'fb' will match 'FooBar'\r\n            hideExpandedCounter: true, // Hide counter badge if parent is expanded\r\n            hideExpanders: false, // Hide expanders if all child nodes are hidden by filter\r\n            highlight: true, // Highlight matches by wrapping inside <mark> tags\r\n            leavesOnly: false, // Match end nodes only\r\n            nodata: true, // Display a 'no data' status node if result is empty\r\n            mode: 'dimm' // Grayout unmatched nodes (pass \"hide\" to remove unmatched node instead)\r\n        },\r\n\r\n        childcounter: {\r\n            deep: true,\r\n            hideZeros: true,\r\n            hideExpanded: true\r\n        },\r\n\r\n        extensions: [\r\n            'filter'\r\n            // 'childcounter'\r\n        ]\r\n    },\r\n    onItemClick: () => {},\r\n};\r\n\r\nexport default memo(FancyTree);","export const getToggleFiles = (node) => {\n    if (node.isFolder()) {\n        let children = []\n        node.visit((child) => {\n            !child.isFolder() && children.push(child)\n        })\n        return children\n    }\n    return [node]\n}\n"],"names":["initialState","loading","ids","entities","updateIds","state","keys","caseReducers","setLoading","payload","setAll","mapKeys","map","v","folder","icon","select","id","selected","selectOne","siblingIds","setExpand","expanded","setCollapse","updateItem","entity","changes","k","reducer","draft","action","type","useTree","useImmerReducer","dispatch","useState","undefined","tree","setTree","actions","useCallback","mapValues","expandAll","collapseAll","toggleExpandAll","visit","node","toggleExpanded","source","toTree","constate","TreeProvider","useTreeContext","events","toEventFuncs","props","_","chain","n","eventName","upperFirst","value","useTreeElement","treeRef","options","omit","useEffect","current","eventFns","$el","$","fancytree","renderNode","event","span","find","count","data","length","append","contextmenu","e","contextMenu","show","MENU_ID","pick","ui","getTree","destroy","FancyTree","style","className","children","onItemClick","useRef","useContextMenu","React","clsx","display","Menu","Item","defaultProps","checkbox","selectMode","quicksearch","clickFolderMode","checkboxAutoHide","disabled","wide","iconWidth","iconSpacing","labelSpacing","levelOfs","filter","autoApply","autoExpand","counter","fuzzy","hideExpandedCounter","hideExpanders","highlight","leavesOnly","nodata","mode","childcounter","deep","hideZeros","hideExpanded","extensions","memo","getToggleFiles","isFolder","child","push"],"mappings":"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"}